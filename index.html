<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Memories: 13 Dec</title>
    
    <!-- Premium Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;500&display=swap" rel="stylesheet">

    <style>
        /* === 1. PERFORMANCE OPTIMIZED BACKGROUND === */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body, html {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #000;
            /* Deep Gradient - Optimized */
            background: radial-gradient(circle at bottom, #1B1464 0%, #000000 70%);
            font-family: 'Poppins', sans-serif;
            color: white;
        }

        /* === 2. CLICK LAYER (MANDATORY FOR AUDIO) === */
        #overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh;
            background: #000;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.8s;
        }

        .play-btn {
            padding: 20px 50px;
            border: 2px solid #ff7675;
            border-radius: 50px;
            font-size: 1.5rem;
            color: #fff;
            background: rgba(255, 118, 117, 0.1);
            cursor: pointer;
            box-shadow: 0 0 30px rgba(255, 118, 117, 0.4);
            animation: pulse 1.2s infinite alternate;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        @keyframes pulse { from { transform: scale(1); } to { transform: scale(1.1); box-shadow: 0 0 50px #ff7675; } }

        /* === 3. VISUALS === */
        #stars { position: absolute; width: 100%; height: 100%; z-index: 0; pointer-events: none; }
        
        /* SVG MOON (Never Ulta) */
        .moon-box {
            position: absolute;
            top: 5%; right: 8%;
            width: 80px; height: 80px;
            filter: drop-shadow(0 0 15px rgba(255, 255, 200, 0.3));
            z-index: 1;
        }
        .moon-svg { width: 100%; height: 100%; fill: #f6e58d; }

        /* === 4. GLASS TEXT CARD (NO LAG) === */
        #content {
            position: absolute;
            top: 40%; left: 50%;
            transform: translate(-50%, -50%);
            width: 90%; max-width: 500px;
            text-align: center;
            z-index: 10;
            opacity: 0; /* Hidden initially */
            transition: opacity 1s ease;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(8px); /* Lower blur for less lag */
        }

        .title {
            font-family: 'Dancing Script', cursive;
            font-size: 3rem;
            color: #ff9ff3;
            text-shadow: 0 0 10px rgba(255, 159, 243, 0.5);
            margin-bottom: 10px;
        }

        .typing {
            min-height: 60px;
            font-size: 1.1rem;
            color: #eee;
            margin-bottom: 20px;
        }

        /* TIMER */
        #timer { display: flex; justify-content: center; gap: 10px; }
        .t-box {
            background: rgba(0,0,0,0.3);
            padding: 10px;
            border-radius: 10px;
            min-width: 65px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .t-val { font-size: 1.5rem; font-weight: 700; display: block; }
        .t-lbl { font-size: 0.7rem; opacity: 0.7; text-transform: uppercase; }

        /* FOOTER */
        .footer {
            position: fixed; bottom: 20px; width: 100%; text-align: center;
            font-family: 'Dancing Script', cursive; font-size: 1.8rem;
            color: rgba(255, 255, 255, 0.6);
            animation: glow 2s infinite;
        }
        @keyframes glow { 50% { opacity: 1; text-shadow: 0 0 15px white; } }

        /* CANVAS TREE */
        canvas { position: absolute; bottom: 0; left: 0; width: 100%; height: 100%; z-index: 2; pointer-events: none; }

        @media (max-width: 768px) {
            #content { top: 35%; }
            .moon-box { width: 60px; height: 60px; }
            .title { font-size: 2.5rem; }
        }

    </style>
</head>
<body>

    <!-- TAP TO UNLOCK AUDIO (Essential) -->
    <div id="overlay">
        <div class="play-btn">Tap to Unlock ❤️</div>
        <p style="margin-top:15px; color:#aaa; font-size:0.8rem;">Enable Music & Magic</p>
    </div>

    <!-- BACKGROUND -->
    <div id="stars"></div>

    <!-- SVG MOON -->
    <div class="moon-box">
        <svg class="moon-svg" viewBox="0 0 24 24">
            <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
        </svg>
    </div>

    <!-- TREE -->
    <canvas id="treeCanvas"></canvas>

    <!-- TEXT CONTENT -->
    <div id="content">
        <div class="glass-panel">
            <h1 class="title">Special Countdown</h1>
            <div class="typing" id="type-text"></div>
            <div id="timer"></div>
        </div>
    </div>

    <!-- FOOTER -->
    <div class="footer">Memories 13 December</div>

    <!-- YOUTUBE API -->
    <div id="yt-player" style="display:none;"></div>

    <!-- LOGIC -->
    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        
        // CONFIG
        const TARGET = "December 13, 2025 00:00:00";
        const SONG_ID = "nAw2ooeubSQ"; 
        const MSG = "Until the stars align on 13th Dec,\nEvery heartbeat is just for you.";

        // 1. SETUP AUDIO
        let player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('yt-player', {
                videoId: SONG_ID,
                playerVars: { 'autoplay': 0, 'loop': 1, 'playlist': SONG_ID }
            });
        }

        // 2. CLICK TO START (Fixes Audio & Lag)
        document.getElementById('overlay').addEventListener('click', function() {
            // Play Audio Immediately
            if(player && player.playVideo) {
                player.playVideo();
                player.unMute();
                player.setVolume(100);
            }

            // Hide Overlay
            this.style.opacity = '0';
            setTimeout(() => this.style.display = 'none', 800);

            // Start Visuals
            document.getElementById('content').style.opacity = '1';
            createStars();
            startTyping();
            initTree();
        });

        // 3. OPTIMIZED STARS (CSS based, less JS load)
        function createStars() {
            const container = document.getElementById('stars');
            for(let i=0; i<100; i++) { // Reduced count for performance
                let s = document.createElement('div');
                s.style.position = 'absolute';
                s.style.left = Math.random()*100+'%';
                s.style.top = Math.random()*100+'%';
                s.style.width = Math.random()*2+'px';
                s.style.height = s.style.width;
                s.style.background = 'white';
                s.style.borderRadius = '50%';
                s.style.opacity = Math.random();
                s.style.animation = `pulse ${Math.random()*2+1}s infinite alternate`;
                container.appendChild(s);
            }
        }

        // 4. TYPING EFFECT
        function startTyping() {
            const el = document.getElementById('type-text');
            let i = 0;
            function type() {
                if(i < MSG.length) {
                    el.innerHTML += MSG.charAt(i) === '\n' ? '<br>' : MSG.charAt(i);
                    i++;
                    setTimeout(type, 50);
                }
            }
            type();
        }

        // 5. TIMER
        function updateTimer() {
            const diff = new Date(TARGET) - new Date();
            if(diff < 0) { document.getElementById('timer').innerHTML = "<h3>Happy Birthday!</h3>"; return; }
            
            const d = Math.floor(diff / (1000*60*60*24));
            const h = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
            const m = Math.floor((diff % (1000*60*60)) / (1000*60));
            const s = Math.floor((diff % (1000*60)) / 1000);

            document.getElementById('timer').innerHTML = `
                <div class="t-box"><span class="t-val">${d}</span><span class="t-lbl">Days</span></div>
                <div class="t-box"><span class="t-val">${h}</span><span class="t-lbl">Hrs</span></div>
                <div class="t-box"><span class="t-val">${m}</span><span class="t-lbl">Min</span></div>
                <div class="t-box"><span class="t-val">${s}</span><span class="t-lbl">Sec</span></div>
            `;
        }
        setInterval(updateTimer, 1000);
        updateTimer();

        // 6. OPTIMIZED TREE (ZERO LAG VERSION)
        let canvas, ctx, w, h, tick = 0;

        function initTree() {
            canvas = document.getElementById('treeCanvas');
            ctx = canvas.getContext('2d');
            resize();
            window.addEventListener('resize', resize);
            animate();
        }

        function resize() {
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
        }

        function drawHeart(x, y, r) {
            ctx.fillStyle = "#ff6b81";
            ctx.beginPath();
            ctx.moveTo(x, y);
            ctx.bezierCurveTo(x-r/2, y-r/2, x-r, y+r/3, x, y+r);
            ctx.bezierCurveTo(x+r, y+r/3, x+r/2, y-r/2, x, y);
            ctx.fill();
        }

        function drawBranch(x, y, len, angle, width, depth) {
            ctx.save();
            ctx.translate(x, y);
            ctx.rotate(angle * Math.PI/180);
            
            // Simplified Branch Drawing (Faster)
            ctx.beginPath();
            ctx.moveTo(0, 0);
            ctx.lineTo(0, -len);
            ctx.strokeStyle = `rgba(255,200,200,${depth/10})`;
            ctx.lineWidth = width;
            ctx.stroke();

            // Optimized Sway
            let sway = Math.sin(tick * 0.02 + depth) * 0.5;

            if (len < 10 || depth < 1) {
                // Draw Heart Leaf
                drawHeart(0, -len, 10);
                ctx.restore();
                return;
            }

            ctx.translate(0, -len);
            // Recursive calls
            drawBranch(0, 0, len*0.75, 20+sway, width*0.7, depth-1);
            drawBranch(0, 0, len*0.75, -20+sway, width*0.7, depth-1);
            ctx.restore();
        }

        function animate() {
            ctx.clearRect(0, 0, w, h);
            tick++;
            
            let startX = w > 800 ? w * 0.85 : w * 0.5;
            // Reduce depth on mobile to prevent LAG
            let depth = w > 800 ? 10 : 8; 
            let size = w > 800 ? 120 : 90;

            drawBranch(startX, h, size, 0, 10, depth);
            requestAnimationFrame(animate);
        }

    </script>
</body>
</html>
