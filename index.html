<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Special Countdown ðŸ’–</title>
    
    <!-- Premium Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Parisienne&family=Jost:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        /* === CORE SETTINGS === */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body, html {
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at bottom, #0B1026 0%, #2B32B2 100%);
            overflow: hidden; /* No scrollbars */
            font-family: 'Jost', sans-serif;
            color: white;
        }

        /* === INTERACTION LAYER (Fixed Audio Bug) === */
        #overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh;
            background: #000000;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: opacity 1s ease-out;
        }

        .overlay-text {
            color: #ff4757;
            font-size: 1.2rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            animation: pulse 1.5s infinite;
            border: 1px solid #ff4757;
            padding: 15px 30px;
            border-radius: 50px;
            box-shadow: 0 0 20px rgba(255, 71, 87, 0.3);
        }

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); opacity: 0.7; } 100% { transform: scale(1); } }

        /* === MOON DESIGN (Corrected & Beautiful) === */
        .moon-wrapper {
            position: absolute;
            top: 5%;
            right: 10%;
            width: 100px;
            height: 100px;
            z-index: 1;
            animation: floatMoon 6s ease-in-out infinite alternate;
        }
        
        /* CSS Crescent Moon */
        .moon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            box-shadow: 15px -15px 0 0 #fffce6; /* Sharp Crescent */
            transform: rotate(-10deg); /* Adjusted Angle */
            filter: drop-shadow(0 0 10px rgba(255, 252, 230, 0.5));
        }
        
        @keyframes floatMoon { from { transform: translateY(0); } to { transform: translateY(-15px); } }

        /* === RESPONSIVE GLASS CONTAINER (Web View Fix) === */
        #content-box {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%); /* True Center */
            width: 90%;
            max-width: 500px; /* Perfect for Desktop */
            z-index: 10;
            pointer-events: none; /* Allow clicking canvas/stars */
        }

        #glass-panel {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px); /* iOS Support */
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            opacity: 0; /* Fade in later */
            transition: opacity 2s;
        }

        /* === TEXT STYLES === */
        .main-title {
            font-family: 'Parisienne', cursive;
            font-size: 2.5rem;
            color: #ff9ff3;
            margin-bottom: 15px;
            text-shadow: 0 0 10px rgba(255, 159, 243, 0.6);
        }

        .type-container {
            min-height: 50px;
            font-size: 1rem;
            line-height: 1.5;
            color: #dfe6e9;
            margin-bottom: 30px;
            font-weight: 300;
        }
        
        .cursor {
            display: inline-block; width: 2px; height: 14px; background: white;
            animation: blink 0.8s infinite;
        }
        @keyframes blink { 50% { opacity: 0; } }

        /* === TIMER STYLES (With Colon) === */
        #timer {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 5px;
        }

        .time-seg { display: flex; flex-direction: column; width: 60px; }
        .t-val { font-size: 1.8rem; font-weight: 600; color: #ffffff; text-shadow: 0 0 5px rgba(255,255,255,0.5); }
        .t-lbl { font-size: 0.7rem; text-transform: uppercase; color: #aaa; margin-top: 5px; letter-spacing: 1px; }
        
        .colon {
            font-size: 1.8rem;
            font-weight: bold;
            color: #ffffffaa;
            padding-bottom: 20px; /* Alignment fix */
            animation: blink 2s infinite;
        }

        /* === CANVAS & BACKGROUND STARS === */
        canvas {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2; /* Tree Behind Text on mobile, careful adjustment needed */
        }
        
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.7;
            animation: twinkle var(--dur) infinite alternate;
        }
        @keyframes twinkle { 0% { opacity: 0.3; } 100% { opacity: 1; } }

        /* Mobile Adjustment */
        @media (max-width: 768px) {
            #content-box { top: 40%; } /* Move Text up on mobile so tree has space */
            .moon-wrapper { width: 60px; height: 60px; top: 30px; right: 20px; }
            .moon { width: 50px; height: 50px; box-shadow: 10px -10px 0 0 #fffce6; }
            .main-title { font-size: 2rem; }
            .t-val { font-size: 1.5rem; }
            .colon { font-size: 1.5rem; }
        }

    </style>
</head>
<body>

    <!-- 1. INTERACTION LAYER -->
    <div id="overlay">
        <div class="overlay-text">Tap to Start Magic âœ¨</div>
    </div>

    <!-- 2. BACKGROUND VISUALS -->
    <div id="stars-container"></div>
    <div class="moon-wrapper"><div class="moon"></div></div>

    <!-- 3. TREE CANVAS -->
    <canvas id="treeCanvas"></canvas>

    <!-- 4. GLASS UI & TEXT -->
    <div id="content-box">
        <div id="glass-panel">
            <div class="main-title" id="headline"></div>
            <div class="type-container" id="typing-area"></div>

            <div id="timer">
                <!-- Injected by JS -->
            </div>
        </div>
    </div>

    <!-- 5. HIDDEN YOUTUBE PLAYER -->
    <div id="yt-player" style="display: none;"></div>

    <!-- === LOGIC SCRIPT === -->
    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        
        // --- CONFIG ---
        const DATE_TARGET = "December 13, 2025 00:00:00";
        const TEXT_CONTENT = "Coming Soon Special Day.\nUntil 13 Dec 2025, \nEvery heartbeat counts for you.";
        const SONG_ID = "nAw2ooeubSQ"; // The song you requested

        // --- VARIABLES ---
        let player;
        let isPlaying = false;
        let canvas, ctx, width, height;
        let tick = 0;
        
        // --- 1. AUDIO CONTROLLER (High IQ Fix) ---
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('yt-player', {
                height: '0', width: '0',
                videoId: SONG_ID,
                playerVars: {
                    'autoplay': 0, 'controls': 0, 'rel': 0, 'loop': 1, 'playlist': SONG_ID
                }
            });
        }

        document.getElementById('overlay').addEventListener('click', function() {
            // Fade out overlay
            this.style.opacity = '0';
            setTimeout(() => { this.style.display = 'none'; }, 1000);

            // Start everything
            if (player && player.playVideo) {
                player.playVideo();
                player.unMute(); // Ensure sound
                player.setVolume(100);
            }
            
            initVisuals(); // Start Tree
            setTimeout(startTextAnimation, 500); // Start Typing
            document.getElementById('glass-panel').style.opacity = '1'; // Show box
        });


        // --- 2. REAL TIME TIMER WITH COLON (Best Design) ---
        function updateTimer() {
            const now = new Date().getTime();
            const target = new Date(DATE_TARGET).getTime();
            const diff = target - now;

            if (diff < 0) {
                document.getElementById('headline').innerText = "Happy Birthday! ðŸŽ‚";
                document.getElementById('timer').innerHTML = "<h3 style='color:#fff'>Today is Your Day!</h3>";
                return;
            }

            const d = Math.floor(diff / (1000 * 60 * 60 * 24));
            const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((diff % (1000 * 60)) / 1000);

            // Format with leading zeros
            const fd = d < 10 ? "0"+d : d;
            const fh = h < 10 ? "0"+h : h;
            const fm = m < 10 ? "0"+m : m;
            const fs = s < 10 ? "0"+s : s;

            const col = `<div class="colon">:</div>`;

            document.getElementById('timer').innerHTML = `
                <div class="time-seg"><span class="t-val">${fd}</span><span class="t-lbl">Days</span></div> ${col}
                <div class="time-seg"><span class="t-val">${fh}</span><span class="t-lbl">Hrs</span></div> ${col}
                <div class="time-seg"><span class="t-val">${fm}</span><span class="t-lbl">Mins</span></div> ${col}
                <div class="time-seg"><span class="t-val">${fs}</span><span class="t-lbl">Secs</span></div>
            `;
        }
        setInterval(updateTimer, 1000);
        updateTimer();

        // --- 3. TEXT ANIMATION ---
        const headline = document.getElementById('headline');
        const typingArea = document.getElementById('typing-area');
        
        // Simple Fade for Headline
        headline.innerText = "Loading Love...";
        
        function startTextAnimation() {
            headline.innerText = "Coming Soon...";
            const lines = TEXT_CONTENT.split('\n');
            let lineIdx = 0;
            let charIdx = 0;

            function typeWriter() {
                if (lineIdx < lines.length) {
                    let currentLine = lines[lineIdx];
                    if (charIdx < currentLine.length) {
                        typingArea.innerHTML += currentLine.charAt(charIdx);
                        charIdx++;
                        setTimeout(typeWriter, 60);
                    } else {
                        typingArea.innerHTML += "<br>";
                        lineIdx++;
                        charIdx = 0;
                        setTimeout(typeWriter, 300);
                    }
                } else {
                     typingArea.innerHTML += "<span class='cursor'></span>";
                }
            }
            typeWriter();
        }


        // --- 4. CANVAS VISUALS (TREE + BACKGROUND) ---
        function initVisuals() {
            canvas = document.getElementById('treeCanvas');
            ctx = canvas.getContext('2d');
            resize();
            window.addEventListener('resize', resize);

            // Create Stars Background
            const starContainer = document.getElementById('stars-container');
            for(let i=0; i<100; i++){
                let d = document.createElement('div');
                d.className = 'star';
                d.style.left = Math.random()*100 + '%';
                d.style.top = Math.random()*80 + '%'; // Keep bottom clean
                d.style.width = Math.random()*3 + 'px';
                d.style.height = d.style.width;
                d.style.setProperty('--dur', (Math.random()*2+1)+'s');
                starContainer.appendChild(d);
            }
            
            animate();
        }

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }

        // --- FRACTAL HEART TREE LOGIC ---
        // Tree Color & Love Color
        const TRUNK_RGB = "101, 67, 33"; 
        
        function drawHeart(x, y, size, angle, color) {
            ctx.save();
            ctx.translate(x, y);
            ctx.rotate(angle);
            ctx.beginPath();
            // Improved Heart Path
            let topCurve = size * 0.3;
            ctx.moveTo(0, topCurve);
            ctx.bezierCurveTo(0, 0, -size/2, 0, -size/2, topCurve);
            ctx.bezierCurveTo(-size/2, (size+topCurve)/2, 0, size*0.9, 0, size);
            ctx.bezierCurveTo(0, size*0.9, size/2, (size+topCurve)/2, size/2, topCurve);
            ctx.bezierCurveTo(size/2, 0, 0, 0, 0, topCurve);
            
            ctx.fillStyle = color;
            ctx.shadowColor = color;
            ctx.shadowBlur = 5;
            ctx.fill();
            ctx.restore();
        }

        function drawBranch(x, y, len, angle, width, depth) {
            ctx.beginPath();
            ctx.save();
            ctx.strokeStyle = `rgba(${TRUNK_RGB}, 1)`;
            ctx.lineWidth = width;
            ctx.lineCap = "round";
            ctx.translate(x, y);
            ctx.rotate(angle * Math.PI/180);
            ctx.moveTo(0, 0);
            ctx.lineTo(0, -len);
            ctx.stroke();

            // Sway Logic (Wind)
            let wind = Math.sin(tick * 0.02 + depth) * 0.5;

            // Leaf/Heart Rendering at the end of branches
            if (len < 10 || depth < 1) {
                 let pulse = 1 + 0.2 * Math.sin(tick * 0.05 + x); // Pulse Effect
                 drawHeart(0, -len, 10 * pulse, 0, "#ff6b81");
                 if(depth < 1 && Math.random() > 0.95) {
                     // Occasional floating particles logic could go here
                 }
                 ctx.restore();
                 return;
            }

            ctx.translate(0, -len);

            // Recursive Branches (Binary Split)
            let nextLen = len * 0.75;
            let nextWidth = width * 0.7;
            let spread = 20 + wind; // Branch Angle spread + wind

            drawBranch(0, 0, nextLen, spread, nextWidth, depth - 1);
            drawBranch(0, 0, nextLen, -spread, nextWidth, depth - 1);

            ctx.restore();
        }

        function animate() {
            ctx.clearRect(0, 0, width, height);
            tick++;

            // Responsive Position
            // PC: Bottom Right. Mobile: Bottom Center
            let startX = width > 700 ? width * 0.85 : width * 0.5; 
            let startY = height;
            let baseLen = width > 700 ? 120 : 80; // Smaller tree on mobile

            // Draw the tree (11 iterations deep)
            drawBranch(startX, startY, baseLen, 0, 14, 10);

            requestAnimationFrame(animate);
        }

    </script>
</body>
</html>
